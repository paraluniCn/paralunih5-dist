"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["src_page_AddLiquidity_index_js"],{91268:(e,t,r)=>{r.d(t,{HM:()=>u,fe:()=>o});var n=r(15861),a=r(64687),s=r.n(a),c=r(34234),i=r(38104),u=function(){var e=(0,n.Z)(s().mark((function e(t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Z)({abi:"ParaFactory",address:i.Z.ParaFactory,params:[t,r],method:"getPair",type:"call"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),o=function(){var e=(0,n.Z)(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Z)({abi:"ParaFactory",address:i.Z.ParaFactory,params:[],method:"allPairsLength",type:"call"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},60679:(e,t,r)=>{r.d(t,{H:()=>u,P:()=>o});var n=r(15861),a=r(64687),s=r.n(a),c=r(34234),i=r(38104),u=function(){var e=(0,n.Z)(s().mark((function e(t,r,n,a,u){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Z)({abi:"router",address:i.Z.ParaRouter,params:[t,r,n,a,"0","0",u,"9999999999"],method:"addLiquidity",type:"send"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n,a,s){return e.apply(this,arguments)}}(),o=function(){var e=(0,n.Z)(s().mark((function e(t,r,n,a){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Z)({abi:"router",address:i.Z.ParaRouter,params:[t,r,n,"0","0",a,"9999999999"],method:"removeLiquidity",type:"send"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r,n,a){return e.apply(this,arguments)}}()},74440:(e,t,r)=>{r.d(t,{S:()=>u,n:()=>o});var n=r(15861),a=r(64687),s=r.n(a),c=r(38104),i=r(34234),u=function(){var e=(0,n.Z)(s().mark((function e(t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.Z)({abi:"ParaStableSwap",address:c.Z.ParaStableSwap,params:[t,r],method:"add_liquidity",type:"send"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),o=function(){var e=(0,n.Z)(s().mark((function e(t,r){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,i.Z)({abi:"ParaStableSwap",address:c.Z.ParaStableSwap,params:[t,r],method:"remove_liquidity",type:"send"});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},66661:(e,t,r)=>{r.r(t),r.d(t,{default:()=>C});var n=r(15861),a=r(70885),s=r(64687),c=r.n(s),i=r(67294),u=r(64478),o=r(63474),d=(r(69016),r(11825)),l=r(67892),m=r(58733),f=r(24539),p=r(91268),b=r(67959),h=r(36871),v=r(68735),x=r(60679),w=r(72461),y=r(1667),Z=r(70794),S=r(38104),k=r(49209),g=r(85746),P=r(5977),E=r(6065),_=r(74440),N=r(96486),D=r(21624);function C(){var e=(0,u.$)().t,t=(0,i.useState)({symbol:"请选择",address:"",img:"".concat(D.LP,"/icons/coin_default_img.png")}),r=(0,a.Z)(t,2),s=r[0],C=r[1],U=(0,i.useState)({symbol:"请选择",address:"",img:"".concat(D.LP,"/icons/coin_default_img.png")}),L=(0,a.Z)(U,2),q=L[0],F=L[1],R=(0,i.useState)("0"),B=(0,a.Z)(R,2),z=B[0],A=B[1],T=(0,i.useState)("0"),j=(0,a.Z)(T,2),H=j[0],J=j[1],M=(0,i.useState)(""),O=(0,a.Z)(M,2),G=O[0],K=O[1],V=(0,i.useState)(""),W=(0,a.Z)(V,2),I=W[0],$=W[1],Q=(0,i.useState)(""),X=(0,a.Z)(Q,2),Y=X[0],ee=X[1],te=(0,i.useState)(!1),re=(0,a.Z)(te,2),ne=re[0],ae=re[1],se=(0,i.useState)(!1),ce=(0,a.Z)(se,2),ie=ce[0],ue=ce[1],oe=(0,P.k6)(),de=(0,f.Z)(),le=de.tokenNewList,me=de.tokenList,fe=(0,v.Z)().user,pe=(0,i.useRef)(),be=function(){var e=(0,n.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(K(t),s.address&&t){e.next=5;break}return K(""),$(""),e.abrupt("return");case 5:Ee(t,s.address,"first");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),he=function(){var e=(0,n.Z)(c().mark((function e(t){return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if($(t),q.address&&t){e.next=5;break}return K(""),$(""),e.abrupt("return");case 5:_e(t,q.address,"second");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ve=function(e,t){pe.current.showModal(e,t)},xe=function(){var e=(0,n.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.address&&q.address){e.next=2;break}return e.abrupt("return");case 2:if("PUSD"!==s.symbol&&"PUSD"!==q.symbol){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,(0,p.HM)(s.address,q.address);case 6:t=e.sent,ee(t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),we=function(){var e=(0,n.Z)(c().mark((function e(){var t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fe.address&&s.address){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,h._J)("BNB"===s.symbol?"":s.address);case 4:return t=e.sent,e.next=7,(0,h.cv)("BNB"===s.symbol?"":s.address,fe.address,t);case 7:r=e.sent,A(r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ye=function(){var e=(0,n.Z)(c().mark((function e(){var t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(fe.address&&q.address){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,h._J)("BNB"===q.symbol?"":q.address);case 4:return t=e.sent,e.next=7,(0,h.cv)("BNB"===q.symbol?"":q.address,fe.address,t);case 7:r=e.sent,J(r);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ze=function(){var e=(0,n.Z)(c().mark((function e(){var t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s.address&&null!=fe&&fe.address){e.next=2;break}return e.abrupt("return");case 2:return t="PUSD"===s.symbol||"PUSD"===q.symbol?S.Z.ParaStableSwap:S.Z.ParaRouter,e.next=5,(0,h.EW)(s.address,fe.address,t);case 5:r=e.sent,ae("0"!==r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Se=function(){var e=(0,n.Z)(c().mark((function e(){var t,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q.address&&null!=fe&&fe.address){e.next=2;break}return e.abrupt("return");case 2:return t="PUSD"===s.symbol||"PUSD"===q.symbol?S.Z.ParaStableSwap:S.Z.ParaRouter,e.next=5,(0,h.EW)(q.address,fe.address,t);case 5:r=e.sent,ue("0"!==r);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=function(){var t=(0,n.Z)(c().mark((function t(){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="PUSD"===s.symbol||"PUSD"===q.symbol?S.Z.ParaStableSwap:S.Z.ParaRouter,t.next=3,(0,k.HF)(s.address,r).catch((function(){}));case 3:t.sent?(b.Z.show(e("common.active_success")),ae(!0)):b.Z.show(e("common.active_fail"));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ge=function(){var t=(0,n.Z)(c().mark((function t(){var r;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r="PUSD"===s.symbol||"PUSD"===q.symbol?S.Z.ParaStableSwap:S.Z.ParaRouter,t.next=3,(0,k.HF)(q.address,r).catch((function(){}));case 3:t.sent?(b.Z.show(e("common.active_success")),ue(!0)):b.Z.show(e("common.active_fail"));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Pe=function(){var e=(0,n.Z)(c().mark((function e(t,r,n){var a,i,u,o;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("0x0000000000000000000000000000000000000000"!==Y){e.next=2;break}return e.abrupt("return");case 2:if("PUSD"!==s.symbol&&"PUSD"!==q.symbol){e.next=13;break}return e.next=5,(0,h.tI)();case 5:if(a=e.sent,"first"!==n){e.next=11;break}return $((0,w.JR)((0,Z.O)(t).multipliedBy(a))),e.abrupt("return");case 11:K((0,w.JR)((0,Z.O)(t).dividedBy(a)));case 12:return e.abrupt("return");case 13:return i=[{abi:"erc20",address:s.address,params:[],method:"decimals"},{abi:"erc20",address:q.address,params:[],method:"decimals"}],e.next=16,(0,E.Z)(i);case 16:return u=e.sent,e.next=19,(0,y.FT)((0,w.tr)(t,"first"===n?u[0]:u[1]).toFixed(),r,Y);case 19:o=e.sent,"first"===n?$((0,w.JR)((0,w.eK)(o,u[1]))):K((0,w.JR)((0,w.eK)(o,u[0])));case 21:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}(),Ee=(0,w.Nr)(Pe,300),_e=(0,w.Nr)(Pe,300),Ne=function(){var t=(0,n.Z)(c().mark((function t(){var r,n;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s.address){t.next=3;break}return b.Z.show("请选择第一个币种"),t.abrupt("return");case 3:if(q.address){t.next=6;break}return b.Z.show("请选择第二个币种"),t.abrupt("return");case 6:if(s.address!==q.address){t.next=9;break}return b.Z.show("请选择两个不一样的币种"),t.abrupt("return");case 9:if(!(0,Z.O)(G).isGreaterThan(z)){t.next=12;break}return b.Z.show("所选第一个币种余额不足"),t.abrupt("return");case 12:if(!(0,Z.O)(I).isGreaterThan(H)){t.next=15;break}return b.Z.show("所选第二个币种余额不足"),t.abrupt("return");case 15:return r=[{abi:"erc20",address:s.address,params:[],method:"decimals"},{abi:"erc20",address:q.address,params:[],method:"decimals"}],t.next=18,(0,E.Z)(r);case 18:if(n=t.sent,"PUSD"!==s.symbol&&"PUSD"!==q.symbol){t.next=25;break}return t.next=22,(0,_.S)([(0,w.tr)(G,n[0]).toFixed(),(0,w.tr)(I,n[1]).toFixed()],0);case 22:return t.sent?(b.Z.show(e("page.AddLiquidity.add_success")),we(),ye()):b.Z.show(e("page.AddLiquidity.add_fail")),t.abrupt("return");case 25:return t.next=27,(0,x.H)(s.address,q.address,(0,w.tr)(G,n[0]).toFixed(),(0,w.tr)(I,n[1]).toFixed(),fe.address).catch((function(){}));case 27:t.sent?(b.Z.show(e("page.AddLiquidity.add_success")),we(),ye()):b.Z.show(e("page.AddLiquidity.add_fail"));case 29:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return(0,i.useEffect)((function(){xe(),Ze(),Se()}),[s,q]),(0,i.useEffect)((function(){we(),ye()}),[s,q,null==fe?void 0:fe.address]),i.createElement(i.Fragment,null,i.createElement("div",{style:{fontSize:"2.4rem"},className:"ml-20 font-weight-500 font-color-white mt-10"},e("page.AddLiquidity.add_liquidity")),i.createElement(o.Z,{bgColor:"#141419"},i.createElement("div",{className:"font-size-16 font-color-white font-weight-500"},e("page.AddLiquidity.choose_token")),i.createElement("div",{className:"divide-line mt-10"}),"0x0000000000000000000000000000000000000000"===Y&&i.createElement("div",{className:"flex-row add_liq_tip mt-20"},i.createElement(d.xc9,{style:{color:"#FF24AB",fontSize:"18px"}}),i.createElement("div",{className:"add_liq_tip-text ml-5"},e("page.AddLiquidity.no_liquidity_tip"))),i.createElement("div",{className:"flex-row fl-ai-center fl-jc-between mt-20 mb-10"},i.createElement("div",{className:"flex-row fl-ai-center",onClick:function(){ve(s.symbol,"first")}},i.createElement("img",{src:s.img,width:20,height:20}),i.createElement("div",{className:"font-color-white font-size-16 ml-5"},s.symbol),i.createElement("img",{src:l.Z,width:10,height:5,className:"ml-10"})),i.createElement("div",{className:"font-size-12 font-color-describe font-weight-bold"},e("common.available"),"：",z)),i.createElement(m.Z,{onChange:be,inputClass:"inputRef-inputClass",inputmaxClass:"inputRef-inputmaxClass",value:G,placeholder:e("common.enter_number"),maxValue:z,setMax:function(){return be(z)},setClean:function(){return be("")}}),i.createElement("div",{className:"flex-row fl-ai-center fl-jc-center"},i.createElement(d.v37,{style:{color:"#707070",fontSize:"24px",marginTop:"1rem"}})),i.createElement("div",{className:"flex-row fl-ai-center fl-jc-between mt-20 mb-10"},i.createElement("div",{className:"flex-row fl-ai-center",onClick:function(){ve(s.symbol,"second")}},i.createElement("img",{src:q.img,width:20,height:20}),i.createElement("div",{className:"font-color-white font-size-16 ml-5"},q.symbol),i.createElement("img",{src:l.Z,width:10,height:5,className:"ml-10"})),i.createElement("div",{className:"font-size-12 font-color-describe font-weight-bold"},e("common.available"),"：",H)),i.createElement(m.Z,{onChange:he,inputClass:"inputRef-inputClass",inputmaxClass:"inputRef-inputmaxClass",value:I,placeholder:e("common.enter_number"),maxValue:H,setMax:function(){return he(H)},setClean:function(){return he("")}}),(!ne||!ie)&&s.address&&q.address&&i.createElement("div",{className:"flex-row fl-jc-between"},!ne&&i.createElement("div",{className:"height-44 button-common flex-1 button-click mt-30",onClick:ke},e("page.LPDoubleEnter.enter_active_name",{name:s.symbol})),!ie&&i.createElement("div",{className:"height-44 button-common flex-1 button-click mt-30 ".concat(!ne&&"ml-10"),onClick:ge},e("page.LPDoubleEnter.enter_active_name",{name:q.symbol}))),(!s.address||!q.address||ne&&ie)&&i.createElement("div",{className:"height-44 button-common button-click mt-30",onClick:Ne},e("page.AddLiquidity.submit_add")),i.createElement("div",{className:"divide-line mt-30"}),i.createElement("div",{className:"flex-row fl-ai-center fl-jc-between height-44 mt-5",onClick:function(){oe.push("/addLiquidityStore")}},i.createElement("div",{className:"font-weight-500 font-color-describe font-size-14"},e("common.my_position")),i.createElement(d.Ehc,{className:"font-color-describe font-size-12"})),i.createElement(g.Z,{ref:pe,onCallback:function(e,t){if(e.symbol!==s.symbol&&e.symbol!==q.symbol)if("first"===t){if("PUSD"===e.symbol)return C(e),void F({address:S.Z.USDT,symbol:"USDT",decimal:18,img:"".concat(D.LP,"/products/USDT@2x.png")});C(e)}else if("second"===t){if("PUSD"===e.symbol)return F(e),void C({address:S.Z.USDT,symbol:"USDT",decimal:18,img:"".concat(D.LP,"/products/USDT@2x.png")});F(e)}},list:(0,N.uniqBy)(me.concat(le),"address")})))}}}]);