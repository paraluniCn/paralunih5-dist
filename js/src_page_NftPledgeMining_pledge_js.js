"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["src_page_NftPledgeMining_pledge_js"],{11296:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Z});var n=r(15861),a=r(70885),s=r(64687),i=r.n(s),c=r(67294),o=r(64478),l=r(63474),d=r(77839),m=r(69016),u=r(31290),f=r(68735),p=r(67959),g=r(54999),h=r(11825),v=r(5977),w=r(6725),E=r(70794),N=r(72461),x=r(6065),b=r(38104);function Z(){var e=(0,v.$B)(),t=(0,o.$)().t,r=(0,f.Z)().user,s=(0,v.k6)(),Z=(0,c.useState)(""),k=(0,a.Z)(Z,2),y=k[0],S=k[1],_=(0,c.useState)(!1),C=(0,a.Z)(_,2),P=C[0],z=C[1],B=(0,c.useState)({}),F=(0,a.Z)(B,2),j=F[0],T=F[1],A=(0,c.useState)("0"),X=(0,a.Z)(A,2),V=X[0],J=X[1],R=(0,c.useState)([]),D=(0,a.Z)(R,2),L=D[0],$=D[1],K=(0,c.useState)(!0),O=(0,a.Z)(K,2),H=O[0],M=O[1],U=(0,c.useState)("0"),W=(0,a.Z)(U,2),Y=W[0],q=W[1],G=(0,c.useState)([]),I=(0,a.Z)(G,2),Q=I[0],ee=I[1],te=e.params.type,re=function(){var e=(0,n.Z)(i().mark((function e(t){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(t.address),T({price:t.price,pid:t.pid,img:t.img}),ne(t.address,t.img);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=(0,n.Z)(i().mark((function e(t,n){var a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.address){e.next=2;break}return e.abrupt("return");case 2:return M(!0),e.next=5,(0,u.yu)(t,r.address).catch((function(){}));case 5:a=e.sent,s=[],a.map((function(e){s.push({img:n,id:e})})),$(s),M(!1);case 10:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}(),ae=function(){var e=(0,n.Z)(i().mark((function e(){var t,n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(j&&j.price&&r.address){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,u.CJ)(j.pid);case 4:t=e.sent,n=(0,E.O)(t.deposit).multipliedBy(j.price),n=(0,N.JR)(n),J(n),se(n);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),se=function(){var e=(0,n.Z)(i().mark((function e(t){var r,n,a,s;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=[{abi:"AsterNftChef",address:d._S.NFTChef,params:[],method:"v42PerBlock"},{abi:"AsterNftChef",address:d._S.NFTChef,params:[j.pid],method:"getPool"},{abi:"AsterNftChef",address:d._S.NFTChef,params:[],method:"totalAllocPoint"},{abi:"ParaPeriphery",address:b.Z.ParaPeriphery,params:[b.Z.V42NEW,b.Z.USDT,b.Z.ParaRouter],method:"getPrice"}],e.next=3,(0,x.Z)(r);case 3:n=e.sent,a=(0,E.O)((0,N.eK)(n[0])).multipliedBy(n[1].allocPoint).dividedBy(n[2]),s=a.dividedBy(3).multipliedBy(86400).multipliedBy(365).multipliedBy((0,N.eK)(n[3])).dividedBy(t).multipliedBy(100),q((0,N.JR)(s,2));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ie=function(){var e=(0,n.Z)(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y&&r.address){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,u._J)(y,r.address,d._S.NFTChef);case 4:t=e.sent,z(t);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(){var e=(0,n.Z)(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y&&r.address){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,u.Lg)(y,d._S.NFTChef).catch((function(){}));case 4:e.sent?(z(!0),p.Z.show(t("common.active_success"))):p.Z.show(t("common.active_fail"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=(0,n.Z)(i().mark((function e(n){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.address){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,(0,u.Lo)(j.pid,[n],r.address);case 4:e.sent?(ne(y,j.img),ae(),p.Z.show(t("page.PledgeV42.pledge_tip_success"))):p.Z.show(t("page.AsterProject.pledge_fail"));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){!function(){var e=[{address:d.Sl[0].address,price:d.Sl[0].price,pid:d.Sl[0].pid,img:d.Sl[0].img},{address:d.mX[0].address,price:d.mX[0].price,pid:d.mX[0].pid,img:d.mX[0].img},{address:d.xs[0].address,price:d.xs[0].price,pid:d.xs[0].pid,img:d.xs[0].img}];S(e[te].address),T({price:e[te].price,pid:e[te].pid,img:e[te].img});var t=[d.Sl,d.mX,d.xs];ee(t[te])}()}),[]),(0,c.useEffect)((function(){var e=[{address:d.Sl[0].address,img:d.Sl[0].img},{address:d.mX[0].address,img:d.mX[0].img},{address:d.xs[0].address,img:d.xs[0].img}];ne(e[te].address,e[te].img)}),[null==r?void 0:r.address]),(0,c.useEffect)((function(){ae(),ie()}),[y,r.address]),c.createElement("div",null,c.createElement("div",{className:"font-color-white mt-10 font-weight-500 font-size-16 ml-20"},t("page.AsterProject.nft_mining")),c.createElement("div",{className:"divide-line mt-10 ml-20 mr-20"}),c.createElement(l.Z,{bgColor:"#141416"},c.createElement("div",{className:"flex-row fl-ai-center fl-jc-between"},c.createElement("div",{className:"font-weight-500 font-color-white ",style:{fontSize:"2rem"}},t("utils.tool.pledge"),"NFT"),c.createElement("div",{className:"font-weight-400 font-size-12",style:{color:"#FF7F00"}},t("utils.tool.earn")," V42")),c.createElement("div",{className:"flex-row fl-ai-center fl-jc-between mt-15"},c.createElement("div",{className:"flex-column"},c.createElement("div",{className:"font-weight-400 font-color-describe font-size-12"},"TVL"),c.createElement("div",{className:"font-weight-bold font-color-white font-size-14 mt-5"},"$",V)),c.createElement("div",{className:"flex-column"},c.createElement("div",{className:"font-weight-400 font-color-describe font-size-12"},"V42 APR"),c.createElement("div",{className:"font-weight-bold font-color-green font-size-14 mt-5"},Y,"%")))),c.createElement("div",{className:"aster-nft-list"},Q.map((function(e,t){return c.createElement("div",{onClick:function(){return re(e)},className:"hnl-item flex-column fl-jc-center fl-ai-center ".concat(e.address===y&&"hnl-item-border-check"),key:t},c.createElement("img",{src:e.img,className:"aster-img"}),c.createElement("div",{className:"font-weight-400 font-color-white font-size-14 mt-10"},e.name),c.createElement("div",{className:"hln-item-check"},c.createElement(m.XZ,{iconSize:"14px",checked:e.address===y})))}))),L.length<=0&&H&&c.createElement("div",{className:"ags-loading"},c.createElement(g.Z,null)),L.length<=0&&!H&&c.createElement(m.HY,{description:t("page.PreSaleNFT.sale_no_canuse")}),L.map((function(e,r){return c.createElement(l.Z,{bgColor:"#141416",key:r},c.createElement("div",{className:"flex-row fl-jc-between fl-ai-center"},c.createElement("img",{src:e.img,className:"aster-img"}),c.createElement("div",{className:"flex-column fl-jc-between ml-10 flex-1",style:{height:"4.4rem"}},c.createElement("div",{className:"font-color-describe font-size-12 font-weight-400"},t("page.StructuredFund.bianhao")),c.createElement("div",{className:"font-color-white font-size-16 font-weight-500"},e.id)),c.createElement("div",{className:"aster-button-pledge flex-center button-click",onClick:function(){return P?oe(e.id):ce()}},t(P?"page.DaoAggregationPool.once_pledge":"component.DaoClaimProfit.activate_transaction"))))})),c.createElement(l.Z,{bgColor:"#141416"},c.createElement("div",{className:"flex-row fl-jc-between fl-ai-center",onClick:function(){return s.push("/nftStore/".concat(te))}},c.createElement("div",{className:"font-color-white font-weight-400 font-size-14"},t("common.my_position")),c.createElement(h.Ehc,{className:"font-color-describe"}))),c.createElement("img",{src:w.Z,className:"bottom-home",onClick:function(){return s.push("/")}}))}}}]);